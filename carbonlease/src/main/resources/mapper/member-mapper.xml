<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "https://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.kh.member.model.dao.MemberMapper">
	
	<select id="loadUser" parameterType="string" resultType="com.kh.member.model.dto.MemberDTO">
		SELECT
		       MEMBER_NO memberNo
		     , MEMBER_ID memberId
		     , MEMBER_PWD memberPwd
		     , NICKNAME
		     , EMAIL
		     , ADDRESS_LINE_1 addressLine1
		     , ADDRESS_LINE_2 addressLine2
		     , ROLE
		     , ENROLL_DATE enrollDate
		  FROM
		       CL_MEMBER
		 WHERE
		       STATUS = 'Y'
		   AND
		       MEMBER_ID = #{username}
		
	</select>
	
		<select id="loadUserByUserNo" parameterType="_long" resultType="com.kh.member.model.dto.MemberDTO">
		SELECT
		       MEMBER_NO memberNo
		     , MEMBER_ID memberId
		     , MEMBER_PWD memberPwd
		     , NICKNAME
		     , EMAIL
		     , ADDRESS_LINE_1 addressLine1
		     , ADDRESS_LINE_2 addressLine2
		     , ROLE
		     , ENROLL_DATE enrollDate
		  FROM
		       CL_MEMBER
		 WHERE
		       STATUS = 'Y'
		   AND
		       MEMBER_NO = #{userNo}
		
	</select>
	
	<select id="countByMemberId" parameterType="string">
		SELECT
		       COUNT(*)
		  FROM
		       CL_MEMBER
		 WHERE
		       MEMBER_ID = #{memberId}
		
	</select>
	
	<select id="countByNickName" parameterType="string">
		SELECT
		       COUNT(*)
		  FROM 
		       CL_MEMBER
		 WHERE
		       NICKNAME = #{nickName}
	</select>
	
	<select id="countByEmail" parameterType="string">
		SELECT
		       COUNT(*)
		  FROM
		       CL_MEMBER
		 WHERE
		       EMAIL = #{email}
	</select>
	
	<insert id="signUp" parameterType="com.kh.member.model.vo.MemberVO">
		INSERT
		  INTO
		       CL_MEMBER
		VALUES
		       (
		       SEQ_MEMBER_NO.NEXTVAL
		     , #{memberId}
		     , #{memberPwd}
		     , #{nickName}
		     , #{email}
		     , #{addressLine1}
		     , #{addressLine2}
		     , #{role}
		     , SYSDATE
		     , DEFAULT
		       )
	</insert>
	
	
</mapper>