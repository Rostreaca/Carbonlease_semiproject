<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "https://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.kh.notice.model.dao.NoticeMapper">

	<select id="findAll"
			resultType="NoticeDTO"
			parameterType="map">
		SELECT
				  NOTICE_NO noticeNo
				, NOTICE_TITLE noticeTitle
				, ENROLL_DATE createDate
				, VIEW_COUNT viewCount
		FROM
				CL_NOTICE
		WHERE		
				STATUS='Y'
		ORDER
		BY
				NOTICE_NO DESC
		OFFSET #{offset} ROWS FETCH NEXT #{limit} ROWS ONLY
	</select>
	
	<select id="findAndCountAll"
			resultType="_int">
		SELECT
				COUNT(*)
		FROM
				CL_NOTICE
		WHERE
				STATUS='Y'
	</select>
				
	<select id="countAll"
			resultType="_int">
		SELECT
				COUNT(*)
		FROM
				CL_NOTICE
	</select>
	
	<select id="findByNo"
			parameterType="long"
			resultType="NoticeDTO">
		SELECT
				  NOTICE_TITLE noticeTitle
				, NOTICE_CONTENT noticeContent
				, VIEW_COUNT viewCount
				, ENROLL_DATE createDate
		FROM
				CL_NOTICE
		WHERE
				STATUS='Y'
		AND
				NOTICE_NO = #{noticeNo}
	</select>
	
	<select id="findAllByAdmin"
			parameterType="map"
			resultType="NoticeAdminDTO"
			>
		SELECT
				  N.NOTICE_NO noticeNo
				, M.MEMBER_ID noticeWriter
				, N.NOTICE_TITLE noticeTitle
				, N.ENROLL_DATE createDate
				, N.VIEW_COUNT viewCount
				, N.STATUS status
				, N.FIX fix
		FROM
				CL_NOTICE N
		JOIN
				CL_MEMBER M
		ON
				(N.MEMBER_NO = M.MEMBER_NO)
		ORDER
		BY
				NOTICE_NO DESC
		OFFSET #{offset} ROWS FETCH NEXT #{limit} ROWS ONLY
	</select>
	
</mapper>